---
description: 主要应用 Cisco Packet Tracer
---

# 集线器\_网桥\_交换机

{% hint style="info" %}
本次演示的各种连接，均使用思科提供的Cisco Packet Tracer来进行仿真实验
{% endhint %}

## 通讯基础知识

![](.gitbook/assets/image%20%2842%29.png)

## 两台主机网线直连

###  1.  新建PC，并连线 【需要用交叉线（不是直通线）】

###  

![](.gitbook/assets/image%20%285%29.png)

###  2.  配置主机IP

![](.gitbook/assets/image%20%2818%29.png)

###  3.  通讯

![](.gitbook/assets/image%20%2819%29.png)

 点击右边仿真，开始通讯后，PC0和PC1开始通讯，也就是在 PC0 的 cmd 中尝试去ping PC1，过程如下：

* 0首先在本机内寻找1的ip地址（196.168.1.11）对应的网卡地址，此时使用的是ping使用的ICMP协议

![](.gitbook/assets/image%20%2835%29.png)

* 然后使用ARP协议（广播---同一网段），在0连接的所有机器广播：“谁的ip地址是196.168.1.11？”

![](.gitbook/assets/image%20%2828%29.png)

* 1应答，使用ARP协议回复0，告知自身MAC地址；然后0应答确认

![](.gitbook/assets/image%20%284%29.png)

* 之后使用正常的ICMP协议，去ping

##  多主机——集线器（同轴电缆升级版）

![](.gitbook/assets/image%20%2843%29.png)

![](.gitbook/assets/image%20%2821%29.png)

![](.gitbook/assets/image%20%2814%29.png)

当我们用计算机0去ping计算机2时候，会经历上述的过程

* 0发送ICMP请求到集线器
* 此时集线器广播同时发送信息给计算机1和2
* 计算机1检测到不是自己的ip，停止接受
* 计算机2检测到是自己的ip，发送自身MAC返回到集线器
* 集线器收到计算机2的消息，**再次广播** 给计算机0和计算机1（携带有目的ip）
* 计算机1检测到不是自己的ip，拒绝掉
* 计算机0检测到是自己的，成功完成通信

 总结：集线器没有智商，没有存储功能，收到信息只会广播

![](.gitbook/assets/image%20%2815%29.png)

多个集线器相连的话，就是继续发，直到找到/丢包

 有n个设备相连在同一网络，1个发送，会发送给剩下的 n-1 个，返回也是，网桥用来解决这个问题

##  多主机——网桥

![](.gitbook/assets/image%20%2826%29.png)

网桥聪明之处在于，可以存储接口和对应MAC地址，用来将主机群隔离开来

以上述右图为例： 当计算机6去ping计算机7时：

* 计算机6发送消息到集线器1，集线器1开始广播
* 同时给计算机7、8和网桥0发消息
  * 8检测非自己，丢包
  * 网桥转发给集线器0，集线器0广播到计算机1、2、3，均丢包
  * 计算机7检测是自己，回传给集线器1
*  集线器1广播给计算机6、8和网桥0
  * 计算机6确认
  * 计算机8丢包
  * 网桥记录下来，记录在路由表：**`[ L口 ：计算机7的MAC地址]`**
* 当计算机6再次ping计算机7时候，消息到达网桥
* 网桥查表，发现在左口，则停止向右口传递，消息丢包     

## 多主机——交换机（升级版多接口网桥）

![](.gitbook/assets/image%20%2830%29.png)

在最开始，交换机还没有学习的时候，和集线器一样，ARP去广播，当学习好之后，再去通讯，则交换机能精准地投放到对应设备（转包风险降低了：不会漫天转发了）

* **同网段：192.168.**_**1**_**.10 和**  **192.168.**_**1**_**.11**

如果全球的计算机都用交换机相连，那么每台计算机在第一次通讯都要向所有的计算机发送广播（同网段），那么就会形成广播风暴

    

## 多主机——路由器（可跨网段）

![](.gitbook/assets/image%20%2844%29.png)

